{% extends 'store/layouts/main.html' %}
{% block content %}
    <div class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="card shadow">
                        <div class="card-body" id="cartdata">
                            {% if cart %}
                                {% for item in cart %}
                                    <div class="row product_data align-items-center">
                                        <div class="col-3 col-md-2">
                                            <img src="{{item.product.product_image.url}}" class="mh-100" width="70px" alt="">
                                        </div>
                                        <div class="col-6 col-md-3">
                                            <h6>{{item.product.name}}</h6>
                                        </div>
                                        <div class="col-3 col-md-2">
                                            <h6>Rs {{item.product.selling_price| stringformat:'d'}}</h6>
                                        </div>
                                        <div class="col-6 col-md-3">
                                            <!--------------------------------------------------- Ajax ------------------------------------------------->
                                            <input type="hidden" class="prod_id" value="{{item.product_id}}">
                                            <input type="hidden" value="{{item.product.quantity}}" class="max_value">
                                            {% csrf_token %}
                                            <!---------------------------------------------------------------------------------------------------------->
                                            {% if item.product.quantity >= item.product_qty %}
                                                <label for="Quantity">Quantity</label>
                                                <div class="input-group text-center mb-3" style="width: 110px;">
                                                    <button class="input-group-text changeQuantity decrement-btn">-</button>
                                                    <input type="text" name="quantity"  class="form-control qty-input text-center" disabled value="{{item.product_qty}}">
                                                    <button class="input-group-text changeQuantity increment-btn">+</button>
                                                </div>
                                            {% else %}
                                                <h6>Out of stock</h6>
                                            {% endif %}
                                        </div>
                                        <div class="col-6 col-md-2">
                                            <button class="btn btn-danger delete-cart-item">Remove</i></button>
                                        </div>
                                    </div>
                                    <hr>
                                {% endfor %}
                                <a href="{% url 'checkout' %}" class="btn btn-outline-success float-end">Checkout</a>
                            {% else %}
                                <h4 class="text-center">Your cart is empty</h4>
                            {% endif %}
                        <div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}